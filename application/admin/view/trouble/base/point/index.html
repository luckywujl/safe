<style>
    .ztree li span.button.switch.level0 {visibility:hidden; width:1px;}
    .ztree li ul.level0 {padding:0; background:none;}
    ul.ztree {
        height: 890px;
        overflow-y: scroll;
        overflow-x: auto;
    }
</style>
<div class="row">
    <div class="col-md-2 hidden-xs hidden-sm" style="padding-right:0;">
        <div class="panel panel-default panel-intro">
            <div class="panel-heading">
                <div class="panel-lead">
                    <em>{:__('Department')}</em>
                </div>
                <div class="panel-control">
                    <button type="button" class="btn btn-box-tool" id="expandall" title="折叠或展开所有部门"><i class="fa fa-chevron-down"></i></button>
                </div>
            </div>
            <div class="panel-body"  style="padding:5px">
                <ul id="ztree" class="ztree ztree-awesome ztree-awesome-folder ztree-awesome-select-default"></ul>
            </div>
        </div>
    </div>
    <div class="col-xs-12 col-md-10">
        <div class="panel panel-default panel-intro">
            {:build_heading()}
            <div class="panel-body">
        			<div id="myTabContent" class="tab-content">
        			  <img id="img" src="" alt="">
            		<div class="tab-pane fade active in" id="one">
               	 <div class="widget-body no-padding">
                    	<div id="toolbar" class="toolbar">
                        <a href="javascript:;" class="btn btn-primary btn-refresh" title="{:__('Refresh')}" ><i class="fa fa-refresh"></i> </a>
                        <a href="javascript:;" class="btn btn-success btn-add {:$auth->check('trouble/base/point/add')?'':'hide'}" title="{:__('Add')}" ><i class="fa fa-plus"></i> {:__('Add')}</a>
                        <a href="javascript:;" class="btn btn-success btn-edit btn-disabled disabled {:$auth->check('trouble/base/point/edit')?'':'hide'}" title="{:__('Edit')}" ><i class="fa fa-pencil"></i> {:__('Edit')}</a>
                        <a href="javascript:;" class="btn btn-danger btn-del btn-disabled disabled {:$auth->check('trouble/base/point/del')?'':'hide'}" title="{:__('Delete')}" ><i class="fa fa-trash"></i> {:__('Delete')}</a>
                        <a href="javascript:;" class="btn btn-info btn-buildqrcode btn-disabled disabled {:$auth->check('trouble/base/point/edit')?'':'hide'}" title="{:__('Buildqrcode')}" ><i class="fa fa-pencil"></i> {:__('Buildqrcode')}</a>
                        <a href="javascript:;" class="btn btn-success btn-downloadqrcode btn-disabled disabled {:$auth->check('trouble/base/point/downqrcode')?'':'hide'}" title="{:__('Downloadqrcode')}" ><i class="fa fa-pencil"></i> {:__('Downloadqrcode')}</a>
                        
                        <a href="javascript:;" class="btn btn-danger btn-import {:$auth->check('trouble/base/point/import')?'':'hide'}" title="{:__('Import')}" id="btn-import-file" data-url="ajax/upload" data-mimetype="csv,xls,xlsx" data-multiple="false"><i class="fa fa-upload"></i> {:__('Import')}</a>

                        <div class="dropdown btn-group {:$auth->check('trouble/base/point/multi')?'':'hide'}">
                            <a class="btn btn-primary btn-more dropdown-toggle btn-disabled disabled" data-toggle="dropdown"><i class="fa fa-cog"></i> {:__('More')}</a>
                            <ul class="dropdown-menu text-left" role="menu">
                                <li><a class="btn btn-link btn-multi btn-disabled disabled" href="javascript:;" data-params="status=normal"><i class="fa fa-eye"></i> {:__('Set to normal')}</a></li>
                                <li><a class="btn btn-link btn-multi btn-disabled disabled" href="javascript:;" data-params="status=hidden"><i class="fa fa-eye-slash"></i> {:__('Set to hidden')}</a></li>
                            </ul>
                        </div>

                        
                    </div>
                    <table id="table" class="table table-striped table-bordered table-hover table-nowrap"
                           data-operate-edit="{:$auth->check('trouble/base/point/edit')}" 
                           data-operate-del="{:$auth->check('trouble/base/point/del')}" 
                           width="100%">
                    </table>
                	</div>
            		</div>

        			</div>
    			</div>
        </div>        
    </div>
</div>
<script>
function getImageFileFromUrl(url, imageName,callback) {
  // imageName一定要带上后缀
    var blob = null;
    var xhr = new XMLHttpRequest(); 
    xhr.open("GET", url);
    xhr.setRequestHeader('Accept', 'image/jpeg');
    xhr.responseType = "blob";
    xhr.onload = () => {
	if (xhr.status == 200) {
      blob = xhr.response;
      let imgFile = new File([blob], imageName, {type: 'image/jpeg'});
	  console.log(imgFile)
      callback.call(this,imgFile);
    }};
    xhr.send();
}



  (function () {
	getImageFileFromUrl('https://dss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=4085579248,162891217&fm=15&gp=0.jpg','testFile.jpg',function(file){
		console.log(file)
		var r = new FileReader()
        r.readAsDataURL(file)
        r.onload = function (e) {
          var base64 = e.target.result;
          $("#img").attr('src', base64);         
        }

	});

  })
</script>


